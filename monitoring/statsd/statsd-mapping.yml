mappings:
  # DAG metrics
  - match: "airflow.dag.*.*.duration"
    name: "airflow_dag_duration_seconds"
    labels:
      dag_id: "$1"
      run_id: "$2"

  - match: "airflow.dag.*.*.success"
    name: "airflow_dag_run_success"
    labels:
      dag_id: "$1"
      run_id: "$2"

  - match: "airflow.dag.*.*.failed"
    name: "airflow_dag_run_failed"
    labels:
      dag_id: "$1"
      run_id: "$2"

  # Task metrics
  - match: "airflow.task.*.*.*.duration"
    name: "airflow_task_duration_seconds"
    labels:
      dag_id: "$1"
      task_id: "$2"
      run_id: "$3"

  - match: "airflow.task.*.*.*.success"
    name: "airflow_task_success"
    labels:
      dag_id: "$1"
      task_id: "$2"
      run_id: "$3"

  - match: "airflow.task.*.*.*.failed"
    name: "airflow_task_failed"
    labels:
      dag_id: "$1"
      task_id: "$2"
      run_id: "$3"

  # Scheduler metrics
  - match: "airflow.scheduler.heartbeat"
    name: "airflow_scheduler_heartbeat"

  - match: "airflow.scheduler.tasks.queued"
    name: "airflow_executor_queued_tasks"

  - match: "airflow.scheduler.tasks.running"
    name: "airflow_executor_running_tasks"

  # Pool metrics
  - match: "airflow.pool.*.slots_available"
    name: "airflow_pool_slots_available"
    labels:
      pool: "$1"

  - match: "airflow.pool.*.slots_used"
    name: "airflow_pool_slots_used"
    labels:
      pool: "$1"

  # Executor metrics
  - match: "airflow.executor.*.queued_tasks"
    name: "airflow_executor_queued_tasks"
    labels:
      executor: "$1"

  - match: "airflow.executor.*.running_tasks"
    name: "airflow_executor_running_tasks"
    labels:
      executor: "$1"
